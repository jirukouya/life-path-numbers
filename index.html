<!DOCTYPE html>
<html>
<body>

<script>
const date = "19971101";
let birthday_digitlist = [];
let day = "";
let month = "";
let year= "";

let nature_day = 0;
let nature_month = 0;
let nature_year = 0;

let soulNumber_list = [];

let lifeNumber_list = [];
let lifeNumber = 0;

let FirstChallengeNumber = 0;
let SecondChallengeNumber = 0;
let ThirdChallengeNumber = 0;
let FourthChallengeNumber = 0;

let NineHallNumber_list = [];
const toNumbers = arr => arr.map(Number);



function DigitMoreThanNine(numbers){

    let remain = 0;
    let digit = 1;
    let sum = 0;
    let total = 0;

    numbers = String(numbers);
    numbers = numbers.split("");
    numbers = toNumbers(numbers);

    //Sum all array into one number
    for(let i = 0; i < numbers.length; i++){
        total += numbers[i];
    }

    //Check if total > 9, repeat while loop
    if (total > 9){

        //Top code is to split the digit individually and add into one sum      
        while (total >= 10){
            remain = total % digit;
            total = total - remain;
            sum = sum + (remain / digit * 10);
 
            //Bottom code is to check if sum > 10, repeat loop till less than 10, reset all parameter
            if (total == 0 && sum >= 10){
                digit = 1;
                total = sum;
                sum = 0;
            }
            digit *= 10;
        }
        return sum
    }
    else{
        sum = total
        return sum
    }
}

function BirthdayCal(numbers){
    birthday_digitlist = (numbers.split(""));
    const date = birthday_digitlist;
    year = date[0] + date[1] + date[2] + date[3];
    month = date[4] + date[5];
    day = date[6] + date[7];
   
    return document.write("Birthday: " + year + "-" + month + "-" + day);
    
}

function NaturalNumber(){
    // Natural Number is 2nd important that affect overall personality.
    // It affect on early age, adulthood, and pioeneer age.
    document.write("<br><br>Nature Numbers:-- ")

    NaturalMonth();
    NaturalDay();
    NaturalYear();

    function NaturalMonth(){
        //Natural month number affecting childhood age personality.
        
        let natural_month = (+(month));

        if (natural_month > 9){
            natural_month = DigitMoreThanNine(natural_month);
            nature_month = natural_month
            return document.write("<br>month: " + natural_month);
        }
        else{
            nature_month = natural_month
            return document.write("<br>month: " + natural_month);
        }
    }

    function NaturalDay(){
        //Natural day number affecting adulthood personality.
        
        let natural_day = (+(day));
        
        if (natural_day > 9){
            natural_day = DigitMoreThanNine(natural_day);
            nature_day = natural_day
            return document.write("<br>day: " + natural_day);
        }
        else{
            nature_day = natural_day
            return document.write("<br>day: " + natural_day);
        }
    }

    function NaturalYear(){
        //Natural day number affecting adulthood personality.
        
        let natural_year = (+(year));
        
        if (natural_year > 9){
            natural_year = DigitMoreThanNine(natural_year);
            nature_year = natural_year
            return document.write("<br>year: " + natural_year);
        }
        else{
            nature_year = natural_year
            return document.write("<br>year: " + natural_year);
        }
    }
}

function HoroscopeCal(numbers){ 
    const date = birthday_digitlist;
    const month = date[4] + date[5];
    const day = (+(date[6] + date[7]));
    let sign = "";

    if (month == "12"){
        if (day < 23){
            sign = "Sagittarius";
            soulNumber_list = 9;
        }
        else{
            sign = "Capricorn";
            soulNumber_list = [10,1];
        }
    }
    if (month == "01"){
        if (day < 21){
            sign = "Capricorn";
            soulNumber_list = [10,1];
        }
        else{
            sign = "Aquarius";
            soulNumber_list = [11,2];
        }
    }
    if (month == "02"){
        if (day < 20){
            sign = "Aquarius";
            soulNumber_list = [11,2];
        }
        else{
            sign = "Pisces";
            soulNumber_list = [12,3];
        }
    }
    if (month == "03"){
        if (day < 22){
            sign = "Pisces";
            soulNumber_list = [12,3];
        }
        else{
            sign = "Aries";
            soulNumber_list = 1;
        }
    }
    if (month == "04"){
        if (day < 21){
            sign = "Aries";
            soulNumber_list = 1;
        }
        else{
            sign = "Taurus";
            soulNumber_list = 2;
        }
    }
    if (month == "05"){
        if (day < 22){
            sign = "Taurus";
            soulNumber_list = 2;
        }
        else{
            sign = "Gemini";
            soulNumber_list = 3;
        }
    }
    if (month == "06"){
        if (day < 22){
            sign = "Gemini";
            soulNumber_list = 3;
        }
        else{
            sign = "Cancer";
            soulNumber_list = 4;
        }
    }
    if (month == "07"){
        if (day < 24){
            sign = "Cancer";
            soulNumber_list = 4;
        }
        else{
            sign = "Leo";
            soulNumber_list = 5;
        }
    }
    if (month == "08"){
        if (day < 24){
            sign = "Leo";
            soulNumber_list = 5;
        }
        else{
            sign = "Virgo";
            soulNumber_list = 6;
        }
    }
    if (month == "09"){
        if (day < 24){
            sign = "Virgo";
            soulNumber_list = 6;
        }
        else{
            sign = "Libra";
            soulNumber_list = 7;
        }
    }
    if (month == "10"){
        if (day < 24){
            sign = "Libra";
            soulNumber_list = 7;
        }
        else{
            sign = "Scorpio";
            soulNumber_list = 8;
        }
    }
    if (month == "11"){
        if (day < 23){
            sign = "Scorpio";
            soulNumber_list = 8;
        }
        else{
            sign = "Sagittarius";
            soulNumber_list = 9;
        }
    }
    return document.write("<br><br>Horoscope: " + sign + "<br>Horoscope Number: " + soulNumber_list);
}

function LifeNumberCal(numbers){
    let remain = 0;
    let digit = 1;
    let sum = 0;
    
    //Top code is to split the digit individually and add into one sum      
    while (numbers >= 10){
       remain = numbers % digit;
       numbers = numbers - remain;
       sum = sum + (remain / digit * 10);
        //Bottom code is to check if sum > 10, repeat loop till less than 10, reset all parameter
        if (numbers == 0 && sum >= 10){
            digit = 1;
            numbers = sum;
            lifeNumber_list
            lifeNumber_list.push(numbers);
            lifeNumber_list
            sum = 0;
          
        }
        digit *= 10;
        lifeNumber = sum;
    }
    return document.write("<br><br>Talent Number: " + lifeNumber_list + "<br>Life Number: " + sum); 
}

function KarmaNumberCal(numbers){
    // Karma Number is 13,14,16,19. All Number that include this.
    let karma = [];

    const list = [].concat(lifeNumber_list);
    list.push(+(numbers[6] + numbers[7]));

    for(i = 0; i < list.length; i++){
        if (list[i] == 13 ||
            list[i] == 14 ||
            list[i] == 16 ||
            list[i] == 19){
        
                karma.push(list[i]);
    
        }

    }
    return (karma.length > 0) ? document.write("<br><br>Karma Number: " + karma):document.write("<br><br>Karma Number: Nil");
}

function MasterNumberCal(numbers){
    // Master Number is 11,22,33,44. All Number that include this.
    let master = [];

    const list = [].concat(lifeNumber_list);
    list.push(+(numbers[4] + numbers[5]));
    list.push(+(numbers[6] + numbers[7]));


    for(i = 0; i < list.length; i++){
        if (list[i] == 11 ||
            list[i] == 22 ||
            list[i] == 33 ||
            list[i] == 44){
                
                master.push(list[i]);
    
        }

    }
    return (master.length > 0) ? document.write("<br>Master Number: " + master):document.write("<br>Master Number: Nil");
}

function LimitNumberCal(numbers){
    //Found out what limits your full potential in your life. Esepcially influenced from childhood.
    let limit = 0;
    let list = [];
    

    for(i = 4; i < numbers.length; i++){
        limit += +(numbers[i]);
    }

    if (limit > 9){
        return document.write("<br><br>Limit Number: " + DigitMoreThanNine(limit));
    }
    else{
        return document.write("<br><br>Limit Number: " + limit);
    }
    
}

function ChallengeNumberCal(numbers){
    //4 different challenges for each stage of age.

    FirstChallenge(numbers);
    SecondChallenge(numbers);
    ThirdChallenge(numbers);
    FourthChallenge(numbers);

    function FirstChallenge(numbers){
        //1st Challenge in early age.
        let result = 0;
        
        let month = [].concat(+(numbers[4] + numbers[5]));
        let day = [].concat(+(numbers[6] + numbers[7]));
        
        if (month > 9){
            month = DigitMoreThanNine(month);
        }

        if (day > 9){
            day = DigitMoreThanNine(day);
        }

        if (month > day){
            result = month - day;
        }
        else{
            result = day - month;
        }

        FirstChallengeNumber = result;
        return document.write("<br><br>1st Challenge Number: " + result);
    }

    function SecondChallenge(numbers){
        //2nd Challenge in teen age.
        let result = 0;
        
        let year = [].concat(+(numbers[0] + numbers[1] + numbers[2] + numbers[3]));
        let day = [].concat(+(numbers[6] + numbers[7]));

        if (year > 9){
            year = DigitMoreThanNine(year);
        }

        if (day > 9){
            day = DigitMoreThanNine(day);
        }

        if (year > day){
            result = year - day;
        }
        else{
            result = day - year;
        }

        SecondChallengeNumber = result;
        return document.write("<br>2nd Challenge Number: " + result);
    }
    
    function ThirdChallenge(numbers){
        //3rd Challenge in adulthood, also known as main challenge.
        let result = 0;
        
        let first = FirstChallengeNumber;
        let second = SecondChallengeNumber;

        if (first > second){
            result = first - second;
        }
        else{
            result = second - first;
        }

        ThirdChallengeNumber = result;
        return document.write("<br>3rd Challenge Number: " + result);
    }

    function FourthChallenge(numbers){
        //4th Challenge in pioneer age.
        let result = 0;
        
        let year = [].concat(+(numbers[0] + numbers[1] + numbers[2] + numbers[3]));
        let month = [].concat(+(numbers[4] + numbers[5]));

        if (year > 9){
            year = DigitMoreThanNine(year);
        }

        if (month > 9){
            month = DigitMoreThanNine(month);
        }

        if (year > month){
            result = year - month;
        }
        else{
            result = month - year;
        }

        FourthChallengeNumber = result;
        return document.write("<br>4th Challenge Number: " + result);
    }

}

function NineHallDiagramCal(){
    //Most important number that conclude a person's personality

    
    //Put Birthday Digit List and Life Number into array
    const list = [].concat(toNumbers(birthday_digitlist));
    list.push(+(lifeNumber));

    //Put life Number list into the array
    let a = lifeNumber_list.join("");
    a = a.split('');
    a = toNumbers(a);
    list.push(a)

    //Put Horoscope Number into the array
    if (soulNumber_list.length > 0){
        list.push(+(soulNumber_list[1]));
    }
    else{
        list.push(+soulNumber_list);
    }

    //Put Day seperate digit into array
    let b = (+(day));


    if (b > 9){
        b = DigitMoreThanNine(b)
        list.push(b)
    }

    else{
        list.push(b)
    }

    //Flatten the array
    let new_list = list.flat();
    new_list.sort();
    var new_list2 = new_list.filter(function(value, index, arr){
        return value > 0;
    })

    NineHallNumber_list = new_list2

    const counts = {};
    const sampleArray = new_list2;
    sampleArray.forEach(function (x) { counts[x] = (counts[x] || 0) + 1; });
    document.write("<br><br>Nine Hall Diagram Numbers: <br>");
    document.write(JSON.stringify(counts));

}


BirthdayCal(date);
NaturalNumber();
HoroscopeCal(date);
LifeNumberCal(date);
KarmaNumberCal(birthday_digitlist);
MasterNumberCal(birthday_digitlist);
LimitNumberCal(birthday_digitlist);
ChallengeNumberCal(birthday_digitlist);
NineHallDiagramCal();
</script>

</body>
</html>
